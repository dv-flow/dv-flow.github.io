<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DV-Flow Fundamentals &#8212; DV Flow  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Packages" href="packages.html" />
    <link rel="prev" title="User Guide" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="dv-flow-fundamentals">
<h1>DV-Flow Fundamentals<a class="headerlink" href="#dv-flow-fundamentals" title="Link to this heading">¶</a></h1>
<section id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Link to this heading">¶</a></h2>
<p>Tasks are the fundamental unit of behavior in a DV-Flow specification. Tasks
typically build on another task – either in whole or in part.</p>
<a class="reference internal image-reference" href="../_images/task_diagram.excalidraw.svg"><img alt="Task Diagram" class="align-center" src="../_images/task_diagram.excalidraw.svg" style="width: 50%;" />
</a>
<p>There are three key concepts of tasks to understand:</p>
<ul>
<li><p><strong>Task Inputs/Dependencies</strong> - A task may express dependencies on other
tasks. Doing so has two effects:</p>
<ul class="simple">
<li><p>A task is executed only after all its dependencies have executed</p></li>
<li><p>The task receives the union of all output data produced by its dependencies.</p></li>
</ul>
<p>Executing a task results in outputs that are passed to any task that
depends on it.</p>
</li>
<li><p><strong>Task Implementation</strong> - A task implementation provides the behavior
for a task. It is most common for tasks to be implemented in whole or in
part by existing tasks. Users can also define their own tasks via several
mechanisms. (see developer’s guide)</p></li>
<li><p><strong>Task Parameters</strong> - A task may specify a set of parameters that it
accepts. Users of that task may modify the parameter values</p></li>
</ul>
<p>Let’s look at two examples using tasks implemented by the standard library
(ref) to illustrate these concepts.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">package</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p1</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SayHello</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">std.Message</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Hello</span><span class="nv"> </span><span class="s">World!&quot;</span>
</pre></div>
</div>
<p>The code above specifies a package (named <cite>p1</cite>) that defines a single task
named <cite>SayHello</cite>. The implementation of the task is provided by the
standard library task <cite>Message</cite> (uses: std.Message). The <cite>Message</cite> task
defines a parameter named <cite>msg</cite>, which specifies the message to display.
Since we want to display “Hello World!”, we override the parameter value
in our task.</p>
<p>Running the <cite>p1.SayHello</cite> task will result in the message “Hello World!”
being displayed.</p>
<p>The example above showed the use of parameters, but not dataflow.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">package</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p1</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rtl_files</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">std.FileSet</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">base</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;src/rtl&quot;</span>
<span class="w">        </span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*.sv&quot;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">systemVerilogSource</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sim</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hdlsim.vlt.SimImage</span>
<span class="w">      </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">rtl_files</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>The example above shows simple dataflow. The <cite>std.FileSet</cite> task from the
standard library produces a <cite>FileSet</cite> parameter based on the specified
user input. In this case, the <cite>FileSet</cite> will contain a list of all
SystemVerilog source files in the <cite>src/rtl</cite> sub-directory.</p>
<p>We identify all SystemVerilog source files because we want to compile them
into a simulation image using the Verilator tool. The task <cite>sim</cite> uses the
<cite>hdlsim.vlt.SimImage</cite> task from the <cite>hdlsim</cite> library to compile the source
files. Note how the <cite>sim</cite> task specifies the <cite>rtl_files</cite> task as a
dependency. This means that it will receive a list of the SystemVerilog
source files paths identified by the <cite>rtl_files</cite> task.</p>
</section>
<section id="packages">
<h2>Packages<a class="headerlink" href="#packages" title="Link to this heading">¶</a></h2>
<p>Packages are used as package namespaces, and to support static configuration.
Built-in packages (eg ‘std’) are always available. User-defined packages
can be imported explicitly via filesystem path or be discovered via tool-specific
package-path mechanisms.</p>
</section>
<section id="dataflow">
<h2>Dataflow<a class="headerlink" href="#dataflow" title="Link to this heading">¶</a></h2>
<p>Many build systems coordinate tasks via shared variables. For example, if
<cite>lib2</cite> has a dependency on <cite>lib1</cite>, then it uses a variable (eg <cite>LIB1_PATH</cite>)
to reference <cite>lib1</cite>. For reliability, the value of these variables are
typically set from above.</p>
<p>Shared and global data poses a flexility and scalability problem. Using
global data to configure tools means that it’s impossible to use two
different configurations as part of the same workflow. Coordinating via
known paths requires all tasks to share the same filesystem, which
limits where tasks can run, and limits opportunities for caching.</p>
<p>Consequently, DV-Flow tasks coordinate via parameter sets produced by
a task and consumed by tasks that depend on the producing task.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">package</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p1</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rtl_files</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">std.FileSet</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">base</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;src/rtl&quot;</span>
<span class="w">        </span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*.sv&quot;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">systemVerilogSource</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sim</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hdlsim.vlt.SimImage</span>
<span class="w">      </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">rtl_files</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>In many cases, dataflow naturally falls out of the build flow. In the example
above, for example, it’s natural to think of the simulation image ‘needing’
to have required source files. In cases where the parameter sets represent
controls over tools in the flow, the production is explicit.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">DV Flow</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Flow-Spec Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://dv-flow.github.io/dv-flow-mgr">DV Flow Manager</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dv-flow.github.io/pytest-dfm">pytest Extension</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dv-flow.github.io/vscode-dv-flow">VSCode Extension</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dv-flow.github.io/dv-flow-libhdlsim">HDLSim Library</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dv-flow.github.io/dv-flow-libide">IDE Library</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dv-flow.github.io/dv-flow-libpss">PSS Library</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">User Guide</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">User Guide</a></li>
      <li>Next: <a href="packages.html" title="next chapter">Packages</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023-2025, Matthew Ballance.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/userguide/fundamentals.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>